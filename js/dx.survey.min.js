var dxSurvey;!function(t){var e=function(){function t(t,e){void 0===e&&(e=null),this.text=e,this.value=t}return t.setData=function(e,n){e.length=0;for(var r=0;r<n.length;r++){var i=n[r],o=new t(null);"undefined"!=typeof i.value?(o.text=i.text,o.value=i.value):o.value=i,e.push(o)}},t.getData=function(t){for(var e=new Array,n=0;n<t.length;n++){var r=t[n];e.push(r.hasText?{value:r.value,text:r.text}:r.value)}return e},t.prototype.getType=function(){return"itemvalue"},Object.defineProperty(t.prototype,"value",{get:function(){return this.itemValue},set:function(e){if(this.itemValue=e,this.itemValue){var n=this.itemValue.toString(),r=n.indexOf(t.Separator);r>-1&&(this.itemValue=n.slice(0,r),this.text=n.slice(r+1))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasText",{get:function(){return this.itemText?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.hasText?this.itemText:this.value?this.value.toString():null},set:function(t){this.itemText=t},enumerable:!0,configurable:!0}),t.Separator="|",t}();t.ItemValue=e;var n=function(){function t(){this.isKO="undefined"!=typeof ko}return t.prototype.getType=function(){throw new Error("This method is abstract")},t}();t.Base=n;var r=function(){function t(){}return t.prototype.getText=function(){throw new Error("This method is abstract")},t}();t.SurveyError=r;var i=function(){function t(){}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return null==this.callbacks||0==this.callbacks.length},enumerable:!0,configurable:!0}),t.prototype.fire=function(t,e){if(null!=this.callbacks)for(var n=0;n<this.callbacks.length;n++){this.callbacks[n](t,e)}},t.prototype.add=function(t){null==this.callbacks&&(this.callbacks=new Array),this.callbacks.push(t)},t.prototype.remove=function(t){if(null!=this.callbacks){var e=this.callbacks.indexOf(t,0);void 0!=e&&this.callbacks.splice(e,1)}},t}();t.Event=i}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.getText=function(){return"You should answer the question."},e}(t.SurveyError);t.AnswerRequiredError=e;var n=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.getText=function(){return"The value should be a numeric."},e}(t.SurveyError);t.RequreNumericError=n;var r=function(t){function e(e){t.call(this),this.text=e}return __extends(e,t),e.prototype.getText=function(){return this.text},e}(t.SurveyError);t.CustomError=r}(dxSurvey||(dxSurvey={}));var dxSurvey;!function(t){var e=function(){function t(t){this.name=t,this.className=null,this.classNamePart=null,this.defaultValue=null,this.onGetValue=null}return Object.defineProperty(t.prototype,"hasToUseGetValue",{get:function(){return this.onGetValue},enumerable:!0,configurable:!0}),t.prototype.isDefaultValue=function(t){return this.defaultValue?this.defaultValue==t:!t},t.prototype.getValue=function(t){return this.onGetValue?this.onGetValue(t):null},Object.defineProperty(t.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue},enumerable:!0,configurable:!0}),t.prototype.setValue=function(t,e){this.onSetValue&&this.onSetValue(t,e)},t.prototype.getObjType=function(t){return this.classNamePart?t.replace(this.classNamePart,""):t},t.prototype.getClassName=function(t){return this.classNamePart&&t.indexOf(this.classNamePart)<0?t+this.classNamePart:t},t}();t.JsonObjectProperty=e;var n=function(){function t(t,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.name=t,this.creator=r,this.parentName=i,this.properties=null,this.properties=new Array;for(var o=0;o<n.length;o++)this.properties.push(new e(n[o]))}return t.prototype.find=function(t){for(var e=0;e<this.properties.length;e++)if(this.properties[e].name==t)return this.properties[e];return null},t}(),r=function(){function t(){this.classes={},this.classProperties={}}return t.prototype.addClass=function(t,e,r,i){void 0===r&&(r=null),void 0===i&&(i=null);var o=new n(t,e,r,i);return this.classes[t]=o,o},t.prototype.setCreator=function(t,e){var n=this.classes[t];n&&(n.creator=e)},t.prototype.setPropertyValues=function(t,e,n,r,i,o){void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null);var s=this.findProperty(t,e);s&&(s.className=n,s.defaultValue=r,s.onGetValue=i,s.onSetValue=o)},t.prototype.setPropertyClassShortName=function(t,e,n){var r=this.findProperty(t,e);r&&(r.classNamePart=n)},t.prototype.getProperties=function(t){var e=this.classProperties[t];return e||(e=new Array,this.fillProperties(t,e),this.classProperties[t]=e),e},t.prototype.createClass=function(t){var e=this.classes[t];return e?e.creator():null},t.prototype.findProperty=function(t,e){var n=this.classes[t];return n?n.find(e):null},t.prototype.fillProperties=function(t,e){var n=this.classes[t];if(n){n.parentName&&this.fillProperties(n.parentName,e);for(var r=0;r<n.properties.length;r++)this.addProperty(n.properties[r],e,e.length)}},t.prototype.addProperty=function(t,e,n){for(var r=-1,i=0;n>i;i++)if(e[i].name==t.name){r=i;break}0>r?e.push(t):e[r]=t},t}();t.JsonMetadata=r;var i=function(){function t(){}return Object.defineProperty(t,"metaData",{get:function(){return t.metaDataValue},enumerable:!0,configurable:!0}),t.prototype.toJsonObject=function(t){return this.toJsonObjectCore(t,null)},t.prototype.toObject=function(e,n){if(e){var r=null;n.getType&&(r=t.metaData.getProperties(n.getType()));for(var i in e)this.valueToObj(e[i],n,i,this.findProperty(r,i))}},t.prototype.toJsonObjectCore=function(e,n){if(!e.getType)return e;var r={};null==n||n.className||(r[t.typePropertyName]=n.getObjType(e.getType()));for(var i=t.metaData.getProperties(e.getType()),o=0;o<i.length;o++)this.valueToJson(e,r,i[o]);return r},t.prototype.valueToJson=function(t,e,n){var r=null;if(r=n.hasToUseGetValue?n.getValue(t):t[n.name],!n.isDefaultValue(r)){if(this.isValueArray(r)){for(var i=[],o=0;o<r.length;o++)i.push(this.toJsonObjectCore(r[o],n));r=i.length>0?i:null}else r=this.toJsonObjectCore(r,n);n.isDefaultValue(r)||(e[n.name]=r)}},t.prototype.valueToObj=function(t,e,n,r){if(null!=r&&r.hasToUseSetValue)return void r.setValue(e,t);if(this.isValueArray(t))return void this.valueToArray(t,e,n,r);var i=this.createNewObj(t,r);i&&(this.toObject(t,i),t=i),e[n]=t},t.prototype.isValueArray=function(t){return t.constructor.toString().indexOf("Array")>-1},t.prototype.createNewObj=function(e,n){var r=e[t.typePropertyName];return r?delete e[t.typePropertyName]:null!=n&&n.className&&(r=n.className),r?t.metaData.createClass(n.getClassName(r)):null},t.prototype.valueToArray=function(t,e,n,r){this.isValueArray(e[n])||(e[n]=[]);for(var i=0;i<t.length;i++){var o=this.createNewObj(t[i],r);o?(e[n].push(o),this.toObject(t[i],o)):e[n].push(t[i])}},t.prototype.findProperty=function(t,e){if(!t)return null;for(var n=0;n<t.length;n++)if(t[n].name==e)return t[n];return null},t.typePropertyName="type",t.metaDataValue=new r,t}();t.JsonObject=i}(dxSurvey||(dxSurvey={}));var dxSurvey;!function(t){var e=function(){function t(){this.creatorHash={}}return t.prototype.registerQuestion=function(t,e){this.creatorHash[t]=e},t.prototype.createQuestion=function(t,e){var n=this.creatorHash[t];return null==n?null:n(e)},t.Instance=new t,t}();t.QuestionFactory=e}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.error=e}return t}();t.ValidatorResult=e;var n=function(t){function e(){t.call(this),this.text=null}return __extends(e,t),e.prototype.getErrorText=function(t){return this.text?this.text:this.getDefaultErrorText(t)},e.prototype.getDefaultErrorText=function(t){return""},e.prototype.validate=function(t,e){return void 0===e&&(e=null),null},e}(t.Base);t.SurveyValidator=n;var r=function(){function t(){}return t.prototype.run=function(t){for(var e=0;e<t.validators.length;e++){var n=t.validators[e].validate(t.value,t.getValidatorTitle());if(null!=n){if(n.error)return n.error;n.value&&(t.value=n.value)}}return null},t}();t.ValidatorRunner=r;var i=function(n){function r(t,e){void 0===t&&(t=null),void 0===e&&(e=null),n.call(this),this.minValue=t,this.maxValue=e}return __extends(r,n),r.prototype.getType=function(){return"numericvalidator"},r.prototype.validate=function(n,r){if(void 0===r&&(r=null),!n||!this.isNumber(n))return new e(null,new t.RequreNumericError);var i=new e(parseFloat(n));return this.minValue&&this.minValue>i.value?(i.error=new t.CustomError(this.getErrorText(r)),i):this.maxValue&&this.maxValue<i.value?(i.error=new t.CustomError(this.getErrorText(r)),i):"number"==typeof n?null:i},r.prototype.getDefaultErrorText=function(t){var e=t?t:"value",n="The '"+e+"' should be ";return this.minValue&&(n+="equal or more than "+this.minValue),this.maxValue&&(this.minValue&&(n+=" and "),n+=" equal or less than "+this.maxValue),n},r.prototype.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},r}(n);t.NumericValidator=i;var o=function(n){function r(t){void 0===t&&(t=0),n.call(this),this.minLength=t}return __extends(r,n),r.prototype.getType=function(){return"textvalidator"},r.prototype.validate=function(n,r){return void 0===r&&(r=null),this.minLength<=0?void 0:n.length<this.minLength?new e(null,new t.CustomError(this.getErrorText(r))):null},r.prototype.getDefaultErrorText=function(t){return"Please enter at least "+this.minLength+" symblos."},r}(n);t.TextValidator=o,t.JsonObject.metaData.addClass("surveyvalidator",["text"]),t.JsonObject.metaData.addClass("numericvalidator",["minValue","maxValue"],function(){return new i},"surveyvalidator"),t.JsonObject.metaData.addClass("textvalidator",["minLength"],function(){return new o},"surveyvalidator")}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(e){function n(t){if(e.call(this),this.name=t,this.titleValue=null,this.isRequiredValue=!1,this.hasCommentValue=!1,this.hasOtherValue=!1,this.visibleValue=!0,this.visibleIndexValue=-1,this.errors=[],this.validators=new Array,this.width="100%",this.isValueChangedInSurvey=!1,this.isKO){this.koValue=this.createkoValue(),this.koComment=ko.observable(this.comment),this.koErrors=ko.observableArray(this.errors),this.dummyObservable=ko.observable(0);var n=this;this.koVisible=ko.computed(function(){return n.dummyObservable(),n.visibleValue}),this.koNo=ko.computed(function(){return n.dummyObservable(),n.visibleIndexValue+1}),this.koValue.subscribe(function(t){n.setNewValue(t)}),this.koComment.subscribe(function(t){n.setNewComment(t)})}}return __extends(n,e),n.prototype.createkoValue=function(){return ko.observable(this.value)},n.prototype.setkoValue=function(t){this.koValue(t)},Object.defineProperty(n.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(t){this.titleValue=t},enumerable:!0,configurable:!0}),n.prototype.supportComment=function(){return!1},n.prototype.supportOther=function(){return!1},Object.defineProperty(n.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(t){this.isRequiredValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.visibleValue},set:function(t){t!=this.visible&&(this.visibleValue=t,this.isKO&&this.dummyObservable(this.dummyObservable()+1),this.data&&this.data.onQuestionVisibilityChanged(this.name,this.visible))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleIndex",{get:function(){return this.visibleIndexValue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasComment",{get:function(){return this.hasCommentValue},set:function(t){this.supportComment()&&(this.hasCommentValue=t,this.hasComment&&(this.hasOther=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasOther",{get:function(){return this.hasOtherValue},set:function(t){this.supportOther()&&(this.hasOtherValue=t,this.hasOther&&(this.hasComment=!1))},enumerable:!0,configurable:!0}),n.prototype.setData=function(t){this.data=t,this.onSurveyValueChanged(this.value)},Object.defineProperty(n.prototype,"value",{get:function(){return null!=this.data?this.data.getValue(this.name):this.questionValue},set:function(t){this.setNewValue(t),this.isKO&&this.setkoValue(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"comment",{get:function(){return null!=this.data?this.data.getComment(this.name):""},set:function(t){this.setNewComment(t),this.isKO&&this.koComment(this.comment)},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return null==this.value},n.prototype.hasErrors=function(){return this.checkForErrors(),this.errors.length>0},n.prototype.checkForErrors=function(){if(this.errors=[],this.onCheckForErrors(this.errors),0==this.errors.length){var t=this.runValidators();t&&this.errors.push(t)}if(this.data&&0==this.errors.length){var t=this.data.validateQuestion(this.name);t&&this.errors.push(t)}this.isKO&&this.koErrors(this.errors)},n.prototype.onCheckForErrors=function(e){this.isRequired&&this.isEmpty()&&this.errors.push(new t.AnswerRequiredError)},n.prototype.runValidators=function(){return(new t.ValidatorRunner).run(this)},n.prototype.setNewValue=function(t){this.isValueChangedInSurvey||(null!=this.data&&this.data.setValue(this.name,t),this.questionValue=t,this.onValueChanged())},n.prototype.onValueChanged=function(){},n.prototype.setNewComment=function(t){null!=this.data&&this.data.setComment(this.name,t)},n.prototype.onSurveyValueChanged=function(t){this.isValueChangedInSurvey=!0,this.value=t,this.isValueChangedInSurvey=!1},n.prototype.setVisibleIndex=function(t){this.visibleIndexValue!=t&&(this.visibleIndexValue=t,this.isKO&&this.dummyObservable(this.dummyObservable()+1))},n.prototype.getValidatorTitle=function(){return null},n}(t.Base);t.Question=e,t.JsonObject.metaData.addClass("question",["name","title","isRequired","hasComment","hasOther","visible","validators","width"]),t.JsonObject.metaData.setPropertyValues("question","visible",null,!0),t.JsonObject.metaData.setPropertyValues("question","title",null,null,function(t){return t.titleValue}),t.JsonObject.metaData.setPropertyValues("question","width",null,"100%"),t.JsonObject.metaData.setPropertyClassShortName("question","validators","validator")}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(e){function n(t){void 0===t&&(t=""),e.call(this),this.name=t,this.questions=new Array,this.data=null,this.visible=!0,this.title="";var n=this;this.questions.push=function(t){return null!=n.data&&t.setData(n.data),Array.prototype.push.call(this,t)}}return __extends(n,e),n.prototype.getType=function(){return"page"},Object.defineProperty(n.prototype,"isVisible",{get:function(){if(!this.visible)return!1;for(var t=0;t<this.questions.length;t++)if(this.questions[t].visible)return!0;return!1},enumerable:!0,configurable:!0}),n.prototype.addQuestion=function(t){null!=t&&this.questions.push(t)},n.prototype.addNewQuestion=function(e,n){var r=t.QuestionFactory.Instance.createQuestion(e,n);return this.addQuestion(r),r},n.prototype.hasErrors=function(){for(var t=!1,e=0;e<this.questions.length;e++)this.questions[e].visible&&this.questions[e].hasErrors()&&(t=!0);return t},n.prototype.addQuestionsToList=function(t,e){if(void 0===e&&(e=!1),!e||this.visible)for(var n=0;n<this.questions.length;n++)(!e||this.questions[n].visible)&&t.push(this.questions[n])},n}(t.Base);t.Page=e,t.JsonObject.metaData.addClass("page",["name","questions","visible","title"],function(){return new e}),t.JsonObject.metaData.setPropertyValues("page","visible",null,!0)}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(e){function n(r){if(e.call(this,r),this.otherItem=new t.ItemValue("other",n.otherItemText),this.choicesValues=new Array,this.otherErrorText=null,this.isKO){var i=this;this.koOtherVisible=ko.computed(function(){return i.koValue(),i.isOtherSelected()})}}return __extends(n,e),n.prototype.isOtherSelected=function(){return this.value==this.otherItem.value},Object.defineProperty(n.prototype,"choices",{get:function(){return this.choicesValues},set:function(e){t.ItemValue.setData(this.choicesValues,e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"otherText",{get:function(){return this.otherItem.text},set:function(t){this.otherItem.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleChoices",{get:function(){if(!this.hasOther)return this.choices;var t=this.choices.slice();return t.push(this.otherItem),t},enumerable:!0,configurable:!0}),n.prototype.supportComment=function(){return!0},n.prototype.supportOther=function(){return!0},n.prototype.onCheckForErrors=function(n){if(e.prototype.onCheckForErrors.call(this,n),this.isOtherSelected()&&!this.comment){var r=this.otherErrorText;r||(r="Please enter the others value."),n.push(new t.CustomError(r))}},n.otherItemText="Other (describe)",n}(t.Question);t.QuestionSelectBase=e;var n=function(t){function e(e){t.call(this,e),this.name=e,this.colCount=1}return __extends(e,t),e}(e);t.QuestionCheckboxBase=n,t.JsonObject.metaData.addClass("selectbase",["choices","otherText","otherErrorText"],null,"question"),t.JsonObject.metaData.setPropertyValues("selectbase","choices",null,null,function(e){return t.ItemValue.getData(e.choices)},function(e,n){t.ItemValue.setData(e.choices,n)}),t.JsonObject.metaData.setPropertyValues("selectbase","otherText",null,e.otherItemText),t.JsonObject.metaData.addClass("checkboxbase",["colCount"],null,"selectbase"),t.JsonObject.metaData.setPropertyValues("checkboxbase","colCount",null,1)}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(e){t.call(this,e),this.name=e}return __extends(e,t),e.prototype.createkoValue=function(){return this.value?ko.observableArray(this.value):ko.observableArray()},e.prototype.setkoValue=function(t){this.koValue(t?[].concat(t):[])},e.prototype.isOtherSelected=function(){return this.value?this.value.indexOf(this.otherItem.value)>=0:!1},e.prototype.getType=function(){return"checkbox"},e}(t.QuestionCheckboxBase);t.QuestionCheckbox=e,t.JsonObject.metaData.addClass("checkbox",[],function(){return new e("")},"checkboxbase"),t.QuestionFactory.Instance.registerQuestion("checkbox",function(t){return new e(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(e){t.call(this,e),this.name=e,this.rows=4,this.cols=50}return __extends(e,t),e.prototype.getType=function(){return"comment"},e.prototype.isEmpty=function(){return t.prototype.isEmpty.call(this)||""==this.value},e}(t.Question);t.QuestionComment=e,t.JsonObject.metaData.addClass("comment",["cols","rows"],function(){return new e("")},"question"),t.JsonObject.metaData.setPropertyValues("comment","cols",null,50),t.JsonObject.metaData.setPropertyValues("comment","rows",null,4),t.QuestionFactory.Instance.registerQuestion("comment",function(t){return new e(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(e){t.call(this,e),this.name=e}return __extends(e,t),e.prototype.getType=function(){return"dropdown"},e}(t.QuestionSelectBase);t.QuestionDropdown=e,t.JsonObject.metaData.addClass("dropdown",[],function(){return new e("")},"selectbase"),t.QuestionFactory.Instance.registerQuestion("dropdown",function(t){return new e(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(e,n,r,i,o){if(t.call(this),this.name=e,this.text=n,this.fullName=r,this.data=i,this.rowValue=o,this.isKO){this.koValue=ko.observable(this.rowValue);var s=this;this.koValue.subscribe(function(t){s.value=t})}}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.rowValue},set:function(t){this.rowValue=t,this.data&&this.data.onMatrixRowChanged(this)},enumerable:!0,configurable:!0}),e}(t.Base);t.MatrixRow=e;var n=function(n){function r(t){n.call(this,t),this.name=t,this.columnsValue=[],this.rowsValue=[]}return __extends(r,n),r.prototype.getType=function(){return"matrix"},Object.defineProperty(r.prototype,"hasRows",{get:function(){return this.rowsValue.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this.columnsValue},set:function(e){t.ItemValue.setData(this.columnsValue,e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rows",{get:function(){return this.rowsValue},set:function(e){t.ItemValue.setData(this.rowsValue,e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visibleRows",{get:function(){var t=new Array,n=this.value;n||(n={});for(var r=0;r<this.rows.length;r++)this.rows[r].value&&t.push(new e(this.rows[r].value,this.rows[r].text,this.name+"_"+this.rows[r].value.toString(),this,n[this.rows[r].value]));return 0==t.length&&t.push(new e(null,"",this.name,this,n)),t},enumerable:!0,configurable:!0}),r.prototype.onMatrixRowChanged=function(t){this.hasRows?(this.value||(this.value={}),this.value[t.name]=t.value):this.value=t.value},r}(t.Question);t.QuestionMatrix=n,t.JsonObject.metaData.addClass("matrix",["columns","rows"],function(){return new n("")},"question"),t.JsonObject.metaData.setPropertyValues("matrix","columns",null,null,function(e){return t.ItemValue.getData(e.columns)},function(e,n){t.ItemValue.setData(e.columns,n)}),t.JsonObject.metaData.setPropertyValues("matrix","rows",null,null,function(e){return t.ItemValue.getData(e.rows)},function(e,n){t.ItemValue.setData(e.rows,n)}),t.QuestionFactory.Instance.registerQuestion("matrix",function(t){return new n(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),t.call(this),this.name=e,this.isKOValueUpdating=!1,this.validators=new Array,this.title=n,this.isKO){this.koValue=ko.observable(this.value);var r=this;this.koValue.subscribe(function(t){r.isKOValueUpdating||(r.value=t)})}}return __extends(e,t),e.prototype.getType=function(){return"multipletextitem"},e.prototype.setData=function(t){this.data=t},Object.defineProperty(e.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(t){this.titleValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(t){null!=this.data&&this.data.setMultipleTextValue(this.name,t)},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.isKO&&(this.isKOValueUpdating=!0,this.koValue(t),this.isKOValueUpdating=!1)},e.prototype.getValidatorTitle=function(){return this.title},e}(t.Base);t.MultipleTextItem=e;var n=function(e){function n(t){e.call(this,t),this.name=t,this.itemSize=25,this.items=new Array,this.isMultipleItemValueChanging=!1;var n=this;this.items.push=function(t){return t.setData(n),Array.prototype.push.call(this,t)}}return __extends(n,e),n.prototype.getType=function(){return"multipletext"},n.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.onItemValueChanged()},n.prototype.setkoValue=function(t){e.prototype.setkoValue.call(this,t),this.onItemValueChanged()},n.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var t=0;t<this.items.length;t++){var e=null;this.value&&this.items[t].name in this.value&&(e=this.value[this.items[t].name]),this.items[t].onValueChanged(e)}},n.prototype.runValidators=function(){var n=e.prototype.runValidators.call(this);if(null!=n)return n;for(var r=0;r<this.items.length;r++)if(n=(new t.ValidatorRunner).run(this.items[r]),null!=n)return n;return null},n.prototype.getMultipleTextValue=function(t){return this.value?this.value[t]:null},n.prototype.setMultipleTextValue=function(t,e){this.isMultipleItemValueChanging=!0,this.value||(this.value={}),this.value[t]=e,this.isMultipleItemValueChanging=!1},n}(t.Question);t.QuestionMultipleText=n,t.JsonObject.metaData.addClass("multipletextitem",["name","title","validators"],function(){return new e("")}),t.JsonObject.metaData.setPropertyClassShortName("multipletextitem","validators","validator"),t.JsonObject.metaData.setPropertyValues("multipletextitem","title",null,null,function(t){return t.titleValue}),t.JsonObject.metaData.addClass("multipletext",["items","itemSize"],function(){return new n("")},"question"),t.JsonObject.metaData.setPropertyValues("multipletext","items","multipletextitem"),t.JsonObject.metaData.setPropertyValues("multipletext","itemSize",null,25),t.QuestionFactory.Instance.registerQuestion("multipletext",function(t){return new n(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(e){t.call(this,e),this.name=e}return __extends(e,t),e.prototype.getType=function(){return"radiogroup"},e}(t.QuestionCheckboxBase);t.QuestionRadiogroup=e,t.JsonObject.metaData.addClass("radiogroup",[],function(){return new e("")},"checkboxbase"),t.QuestionFactory.Instance.registerQuestion("radiogroup",function(t){return new e(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(e){function n(t){if(e.call(this,t),this.name=t,this.rates=[],this.mininumRateDescription=null,this.maximumRateDescription=null,this.isKO){var n=this;this.koVisibleRateValues=ko.computed(function(){return n.visibleRateValues})}}return __extends(n,e),Object.defineProperty(n.prototype,"rateValues",{get:function(){return this.rates},set:function(e){t.ItemValue.setData(this.rates,e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleRateValues",{get:function(){return this.rateValues.length>0?this.rateValues:n.defaultRateValues},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"rating"},n.prototype.supportComment=function(){return!0},n.prototype.supportOther=function(){return!0},n.defaultRateValues=[],n}(t.Question);t.QuestionRating=e,t.ItemValue.setData(e.defaultRateValues,[1,2,3,4,5]),t.JsonObject.metaData.addClass("rating",["rateValues","mininumRateDescription","maximumRateDescription"],function(){return new e("")},"question"),t.JsonObject.metaData.setPropertyValues("rating","rateValues",null,null,function(e){return t.ItemValue.getData(e.rateValues)},function(e,n){t.ItemValue.setData(e.rateValues,n)}),t.QuestionFactory.Instance.registerQuestion("rating",function(t){return new e(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(t){function e(e){t.call(this,e),this.name=e,this.size=25}return __extends(e,t),e.prototype.getType=function(){return"text"},e.prototype.isEmpty=function(){return t.prototype.isEmpty.call(this)||""==this.value},e}(t.Question);t.QuestionText=e,t.JsonObject.metaData.addClass("text",["size"],function(){return new e("")},"question"),t.JsonObject.metaData.setPropertyValues("text","size",null,25),t.QuestionFactory.Instance.registerQuestion("text",function(t){return new e(t)})}(dxSurvey||(dxSurvey={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dxSurvey;!function(t){var e=function(e){function n(n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),e.call(this),this.title="",this.pages=new Array,this.currentPageValue=null,this.valuesHash={},this.commentsHash={},this.templateUrlValue=null,this.onComplete=new t.Event,this.onValueChanged=new t.Event,this.onVisibleChanged=new t.Event,this.onValidateQuestion=new t.Event;var o=this;this.pages.push=function(t){return t.data=o,Array.prototype.push.call(this,t)},ko&&(this.dummyObservable=ko.observable(0),this.koCurrentPage=ko.computed(function(){return o.dummyObservable(),o.currentPage}),this.koIsFirstPage=ko.computed(function(){return o.dummyObservable(),o.isFirstPage}),this.koIsLastPage=ko.computed(function(){return o.dummyObservable(),o.isLastPage})),n&&(new t.JsonObject).toObject(n,this),this.render(r,i)}return __extends(n,e),n.prototype.getType=function(){return"survey"},Object.defineProperty(n.prototype,"templateUrl",{get:function(){return this.templateUrlValue?this.templateUrlValue:n.templateKnockout},set:function(t){this.templateUrlValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){var t={};for(var e in this.valuesHash)t[e]=this.valuesHash[e];return t},set:function(t){if(this.valuesHash={},t)for(var e in t)this.valuesHash[e]=t[e];this.notifyAllQuestionsOnValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasComments",{get:function(){for(var t in this.commentsHash)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"comments",{get:function(){var t={};for(var e in this.commentsHash)t[e]=this.commentsHash[e];return t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visiblePages",{get:function(){for(var t=new Array,e=0;e<this.pages.length;e++)this.pages[e].isVisible&&t.push(this.pages[e]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PageCount",{get:function(){return this.pages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPage",{get:function(){var t=this.visiblePages;return null!=this.currentPageValue&&t.indexOf(this.currentPageValue)<0&&(this.currentPage=null),null==this.currentPageValue&&t.length>0&&(this.currentPage=t[0]),this.currentPageValue},set:function(t){var e=this.visiblePages;null!=t&&e.indexOf(t)<0||t!=this.currentPageValue&&(this.currentPageValue=t,this.updateKoCurrentPage())},enumerable:!0,configurable:!0}),n.prototype.updateKoCurrentPage=function(){this.isKO&&this.dummyObservable(this.dummyObservable()+1)},n.prototype.nextPage=function(){if(this.isLastPage)return!1;if(this.isCurrentPageHasErrors)return!1;var t=this.visiblePages,e=t.indexOf(this.currentPage);return this.currentPage=t[e+1],
!0},Object.defineProperty(n.prototype,"isCurrentPageHasErrors",{get:function(){return null==this.currentPage?!0:this.currentPage.hasErrors()},enumerable:!0,configurable:!0}),n.prototype.prevPage=function(){if(this.isFirstPage)return!1;var t=this.visiblePages,e=t.indexOf(this.currentPage);this.currentPage=t[e-1]},n.prototype.completeLastPage=function(){return this.isCurrentPageHasErrors?!1:(this.onComplete.fire(this,null),!0)},Object.defineProperty(n.prototype,"isFirstPage",{get:function(){return null==this.currentPage?!0:0==this.visiblePages.indexOf(this.currentPage)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLastPage",{get:function(){if(null==this.currentPage)return!0;var t=this.visiblePages;return t.indexOf(this.currentPage)==t.length-1},enumerable:!0,configurable:!0}),n.prototype.getPage=function(t){return this.pages[t]},n.prototype.addPage=function(t){null!=t&&this.pages.push(t)},n.prototype.addNewPage=function(e){var n=new t.Page(e);return this.addPage(n),n},n.prototype.getQuestionByName=function(t){for(var e=this.getAllQuestions(),n=0;n<e.length;n++)if(e[n].name==t)return e[n];return null},n.prototype.getAllQuestions=function(t){void 0===t&&(t=!1);for(var e=new Array,n=0;n<this.pages.length;n++)this.pages[n].addQuestionsToList(e,t);return e},n.prototype.notifyQuestionOnValueChanged=function(t,e){for(var n=this.getAllQuestions(),r=0;r<n.length;r++)n[r].name==t&&n[r].onSurveyValueChanged(e);this.onValueChanged.fire(this,{name:t,value:e})},n.prototype.notifyAllQuestionsOnValueChanged=function(){for(var t=this.getAllQuestions(),e=0;e<t.length;e++)t[e].onSurveyValueChanged(this.getValue(t[e].name))},n.prototype.render=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.templateUrl=e;var n=this;t&&"string"==typeof t&&(t=document.getElementById(t)),t&&(this.renderedElement=t),t=this.renderedElement,t&&(this.onBeforeRender(),this.isKO&&this.loadFile(this.templateUrl,function(e){t.innerHTML=e,n.applyBinding()},function(e){t.innerHTML="Knockout template could not be loaded. "+e}))},n.prototype.onBeforeRender=function(){this.updateVisibleIndexes()},n.prototype.loadFile=function(t,e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&(200==r.status?e(r.responseText):n(r.responseText))},r.open("GET",t,!0),r.send()},n.prototype.applyBinding=function(){this.isKO&&null!=this.renderedElement&&(this.updateKoCurrentPage(),ko.cleanNode(this.renderedElement),ko.applyBindings(this,this.renderedElement))},n.prototype.updateVisibleIndexes=function(){for(var t=0,e=this.getAllQuestions(!0),n=0;n<e.length;n++)e[n].setVisibleIndex(t++)},n.prototype.getValue=function(t){return t&&0!=t.length?this.valuesHash[t]:null},n.prototype.setValue=function(t,e){this.valuesHash[t]=e,this.notifyQuestionOnValueChanged(t,e)},n.prototype.getComment=function(t){var e=this.commentsHash[t];return null==e&&(e=""),e},n.prototype.setComment=function(t,e){""==e||null==e?delete this.commentsHash[t]:this.commentsHash[t]=e},n.prototype.onQuestionVisibilityChanged=function(t,e){this.updateVisibleIndexes(),this.onVisibleChanged.fire(this,{name:t,visible:e})},n.prototype.validateQuestion=function(e){if(this.onValidateQuestion.isEmpty)return null;var n={name:e,value:this.getValue(e),error:null};return this.onValidateQuestion.fire(this,n),n.error?new t.CustomError(n.error):null},n.templateKnockout="templates/dx.survey.ko.html",n}(t.Base);t.Survey=e,t.JsonObject.metaData.addClass("survey",["title","pages","questions"]),t.JsonObject.metaData.setPropertyValues("survey","pages","page"),t.JsonObject.metaData.setPropertyValues("survey","questions","",null,function(t){return null},function(e,n){var r=e.addNewPage("");(new t.JsonObject).toObject({questions:n},r)})}(dxSurvey||(dxSurvey={}));