<nav class="navbar-default navbar-static-side examplesidebar" role="navigation">
    <div class="sidebar-collapse">
        <ul class="nav metismenu" id="side-menu" data-bind="foreach: categories">
            <li data-bind="css:{active: selected}">
                <a data-bind="click:onClick" href="#">
                        <span data-bind="text: name, css: {leftmenucategorytitleactive: expanded()}"></span>
                    <span class="glyphicon pull-right" aria-hidden="true" data-bind="css:{'glyphicon-chevron-up': expanded(), 'glyphicon-chevron-down': !expanded()}"></span>
                </a>
                <ul class="nav nav-second-level"  data-bind="foreach: items, visible:expanded">
                    <li data-bind="css: {active: selected}">
                        <a data-bind="attr: {href: url}">
                            <span data-bind="text:name"></span>
                            <div><small data-bind="text:text"></small></div>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</nav>

<script type="text/javascript">
    var ExampleItem = function(name, text, url) {
        this.name = name;
        this.text = text;
        this.url = url;
        this.selected = false;
    };
    var ExampleCategory = function(name, items) {
        this.name = name;
        this.items = items;
        this.selected = false;
        this.expanded = ko.observable(false);
        var self = this;
        this.onClick = function() { self.expanded(!self.expanded());}
    };
    var ViewModel = function(){
        this.categories = [
            new ExampleCategory("Question Types", [
                new ExampleItem("Radio group", "One choice question", "questiontype-radiogroup.html"),
                new ExampleItem("Dropdown", "One choice question", "questiontype-dropdown.html"),
                new ExampleItem("Checkboxes", "Multiple choices question", "questiontype-checkbox.html"),
                new ExampleItem("Matrix", "Matrix question", "questiontype-matrix.html"),
                new ExampleItem("Matrixdropdown", "Matrix question with multiple choices", "questiontype-matrixdropdown.html"),
                new ExampleItem("Multiple Text", "Multiple text question", "questiontype-multipletext.html"),
                new ExampleItem("Rating", "Rating question", "questiontype-rating.html"),
                new ExampleItem("Text", "Text question", "questiontype-text.html"),
                new ExampleItem("Comment", "Comment question", "questiontype-comment.html"),
                new ExampleItem("Html", "Html Elements", "questiontype-html.html")
            ]),
            new ExampleCategory("Survey", [
                new ExampleItem("Change Rendering", "Change question templates", "survey-customtemplate.html"),
                new ExampleItem("Work with data", "Get/set data from/to survey", "survey-data.html"),
                new ExampleItem("Survey Options", "Use properties to set up your survey", "survey-options.html"),
                new ExampleItem("Custom Navigation", "Use your own navigation", "survey-customnavigation.html")
            ]),
            new ExampleCategory("Validation", [
                new ExampleItem("Standard validators", "Example of using standard validators", "validators-standard.html"),
                new ExampleItem("Create custom validators", "Example of creating and using a custom validator", "validators-custom.html"),
                new ExampleItem("Validate on event", "Example of using OnValidatateQuestion event", "validators-event.html")
            ]),
            new ExampleCategory("Triggers", [
                new ExampleItem("Visible Trigger", "Show/Hide question(s) on survey running", "trigger-visible.html")
            ]),
            new ExampleCategory("Using dxService", [
                new ExampleItem("Load Survey", "Load survey json from the service", "service-load.html"),
                new ExampleItem("Save Survey Result", "Save survey result to the service", "service-send.html"),
                new ExampleItem("Get Survey Result", "Get Survey Result after sending results", "service-result.html"),
                new ExampleItem("Run survey one time", "Use your user id to run the survey one time and optionally store result on every page", "service-oneperuser.html")
            ]),
            new ExampleCategory("Real examples", [
                new ExampleItem("Product Feedback", "Three pages survey", "real-productfeedback.html"),
                new ExampleItem("DevExpress Winforms Skins", "The real survey ran in DevExpress", "real-devexpresswinformsskins.html")
            ])
        ]
        this.findSelected = function() {
            var loc = window.location.href;
            var pos = loc.lastIndexOf('/');
            loc = loc.substr(pos + 1);
            for(var i = 0; i < this.categories.length; i ++) {
                var category = this.categories[i];
                for(var j = 0; j < category.items.length; j ++) {
                    var item = category.items[j];
                    if(loc == item.url) {
                        item.selected = true;
                        category.selected = true;
                        category.expanded(true);
                        return;
                    }
                }
            }
        }
        this.findSelected();
    };
    ko.applyBindings(new ViewModel(), document.getElementById("examples"));
</script>