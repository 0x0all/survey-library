/// <reference path="../../sources/base.ts" />
/// <reference path="../../sources/survey.ts" />
/// <reference path="../../sources/question.ts" />
/// <reference path="../../sources/page.ts" />
/// <reference path="../../sources/question_baseselect.ts" />
/// <reference path="../../sources/question_checkbox.ts" />
var dxSurvey;
(function (dxSurvey) {
    var koTests;
    (function (koTests) {
        QUnit.module("koTests");
        QUnit.test("Super stable test", function (assert) {
            assert.equal(1 + 1, 2, "This should usually pass");
        });
        QUnit.test("Set value through observable value", function (assert) {
            var question = new dxSurvey.Question("q");
            question.koValue("test");
            assert.equal(question.value, "test", "value is set correctly.");
        });
        QUnit.test("koOtherVisible for one choice items", function (assert) {
            var question = new dxSurvey.QuestionSelectBase("q");
            assert.equal(question.koOtherVisible(), false, "Initially is not visible");
            question.koValue(question.otherString);
            assert.equal(question.koOtherVisible(), true, "Other visible is true after selecting it");
        });
        QUnit.test("Create koValue as observable array for checkbox", function (assert) {
            var question = new dxSurvey.QuestionCheckbox("q");
            question.koValue.push("test1");
            question.koValue.push("test2");
            assert.deepEqual(question.koValue(), ["test1", "test2"], "koValue is observable array");
            assert.deepEqual(question.value, ["test1", "test2"], "value is set correctly.");
        });
        QUnit.test("koOtherVisible for multi choice items", function (assert) {
            var question = new dxSurvey.QuestionCheckbox("q");
            assert.equal(question.koOtherVisible(), false, "Initially is not visible");
            question.koValue.push("test1");
            question.koValue.push(question.otherString);
            assert.equal(question.koOtherVisible(), true, "Other visible is true after selecting it");
            question.koValue.pop();
            assert.equal(question.koOtherVisible(), false, "Other visible is true after selecting it");
        });
        QUnit.test("Update koValue on changing data in Survey or Question.value ", function (assert) {
            var survey = new dxSurvey.Survey();
            survey.setValue("textQuestion", "initialValue");
            var page = survey.addNewPage("my page");
            var question = page.addNewQuestion("text", "textQuestion");
            assert.equal(question.koValue(), "initialValue", "get initial value");
            question.value = "setFromValue";
            assert.equal(question.koValue(), "setFromValue", "set from question value");
            survey.setValue("textQuestion", "setFromSurvey");
            assert.equal(question.koValue(), "setFromSurvey", "set from survey");
        });
        QUnit.test("Update koValue on changing data in Survey or Question.value for Multiple Answer Question ", function (assert) {
            var survey = new dxSurvey.Survey();
            survey.setValue("checkboxQuestion", "initialValue");
            var page = survey.addNewPage("my page");
            var question = page.addNewQuestion("checkbox", "checkboxQuestion");
            assert.deepEqual(question.koValue(), ["initialValue"], "get initial value");
            question.value = "setFromValue";
            assert.deepEqual(question.koValue(), ["setFromValue"], "set from question value");
            survey.setValue("checkboxQuestion", "setFromSurvey");
            assert.deepEqual(question.koValue(), ["setFromSurvey"], "set from survey");
        });
        QUnit.test("Set notification on setting survey data", function (assert) {
            var survey = new dxSurvey.Survey();
            var page = survey.addNewPage("page1");
            var question = page.addNewQuestion("text", "q1");
            question.koValue("value1");
            survey.data = [{ "q1": "value2" }];
            assert.equal(survey.getValue("q1"), "value2", "survey data for q1");
            assert.equal(question.koValue(), "value2", "knockout value is updated.");
        });
        QUnit.test("koVisible property", function (assert) {
            var survey = new dxSurvey.Survey();
            var page = survey.addNewPage("page1");
            var question = page.addNewQuestion("text", "q1");
            assert.equal(question.koVisible(), true, "it is true by default");
            question.visible = false;
            assert.equal(question.koVisible(), false, "it is false now");
        });
    })(koTests = dxSurvey.koTests || (dxSurvey.koTests = {}));
})(dxSurvey || (dxSurvey = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImR4c3VydmV5X2tvdGVzdHMudHMiXSwibmFtZXMiOlsiZHhTdXJ2ZXkiLCJkeFN1cnZleS5rb1Rlc3RzIl0sIm1hcHBpbmdzIjoiQUFBQSxBQU1BLDhDQU44QztBQUM5QyxnREFBZ0Q7QUFDaEQsa0RBQWtEO0FBQ2xELDhDQUE4QztBQUM5Qyw2REFBNkQ7QUFDN0QsMkRBQTJEO0FBQzNELElBQU8sUUFBUSxDQXlFZDtBQXpFRCxXQUFPLFFBQVE7SUFBQ0EsSUFBQUEsT0FBT0EsQ0F5RXRCQTtJQXpFZUEsV0FBQUEsT0FBT0EsRUFBQ0EsQ0FBQ0E7UUFDckJDLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLENBQUNBO1FBRXhCQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxtQkFBbUJBLEVBQUVBLFVBQVVBLE1BQU1BO1lBQzVDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztRQUN2RCxDQUFDLENBQUNBLENBQUNBO1FBQ0hBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLG9DQUFvQ0EsRUFBRUEsVUFBVUEsTUFBTUE7WUFDN0QsSUFBSSxRQUFRLEdBQUcsSUFBSSxpQkFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2pDLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDekIsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1FBQ3BFLENBQUMsQ0FBQ0EsQ0FBQ0E7UUFDSEEsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EscUNBQXFDQSxFQUFFQSxVQUFVQSxNQUFNQTtZQUM5RCxJQUFJLFFBQVEsR0FBRyxJQUFJLDJCQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxFQUFFLEtBQUssRUFBRSwwQkFBMEIs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QyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLG9CQUFvQixDQUFDLENBQUM7WUFDcEUsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLDRCQUE0QixDQUFDLENBQUM7UUFDN0UsQ0FBQyxDQUFDQSxDQUFDQTtRQUNIQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxvQkFBb0JBLEVBQUVBLFVBQVVBLE1BQU1BO1lBQzdDLElBQUksTUFBTSxHQUFHLElBQUksZUFBTSxFQUFFLENBQUM7WUFDMUIsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0QyxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsRUFBRSxJQUFJLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztZQUNsRSxRQUFRLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUN6QixNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUNqRSxDQUFDLENBQUNBLENBQUNBO0lBRVBBLENBQUNBLEVBekVlRCxPQUFPQSxHQUFQQSxnQkFBT0EsS0FBUEEsZ0JBQU9BLFFBeUV0QkE7QUFBREEsQ0FBQ0EsRUF6RU0sUUFBUSxLQUFSLFFBQVEsUUF5RWQiLCJmaWxlIjoidGVzdHNfa28uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vc291cmNlcy9iYXNlLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3NvdXJjZXMvc3VydmV5LnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3NvdXJjZXMvcXVlc3Rpb24udHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vc291cmNlcy9wYWdlLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3NvdXJjZXMvcXVlc3Rpb25fYmFzZXNlbGVjdC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9zb3VyY2VzL3F1ZXN0aW9uX2NoZWNrYm94LnRzXCIgLz5cclxubW9kdWxlIGR4U3VydmV5LmtvVGVzdHMge1xyXG4gICAgUVVuaXQubW9kdWxlKFwia29UZXN0c1wiKTtcclxuXHJcbiAgICBRVW5pdC50ZXN0KFwiU3VwZXIgc3RhYmxlIHRlc3RcIiwgZnVuY3Rpb24gKGFzc2VydCkge1xyXG4gICAgICAgIGFzc2VydC5lcXVhbCgxICsgMSwgMiwgXCJUaGlzIHNob3VsZCB1c3VhbGx5IHBhc3NcIik7XHJcbiAgICB9KTtcclxuICAgIFFVbml0LnRlc3QoXCJTZXQgdmFsdWUgdGhyb3VnaCBvYnNlcnZhYmxlIHZhbHVlXCIsIGZ1bmN0aW9uIChhc3NlcnQpIHtcclxuICAgICAgICB2YXIgcXVlc3Rpb24gPSBuZXcgUXVlc3Rpb24oXCJxXCIpO1xyXG4gICAgICAgIHF1ZXN0aW9uLmtvVmFsdWUoXCJ0ZXN0XCIpO1xyXG4gICAgICAgIGFzc2VydC5lcXVhbChxdWVzdGlvbi52YWx1ZSwgXCJ0ZXN0XCIsIFwidmFsdWUgaXMgc2V0IGNvcnJlY3RseS5cIik7XHJcbiAgICB9KTtcclxuICAgIFFVbml0LnRlc3QoXCJrb090aGVyVmlzaWJsZSBmb3Igb25lIGNob2ljZSBpdGVtc1wiLCBmdW5jdGlvbiAoYXNzZXJ0KSB7XHJcbiAgICAgICAgdmFyIHF1ZXN0aW9uID0gbmV3IFF1ZXN0aW9uU2VsZWN0QmFzZShcInFcIik7XHJcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHF1ZXN0aW9uLmtvT3RoZXJWaXNpYmxlKCksIGZhbHNlLCBcIkluaXRpYWxseSBpcyBub3QgdmlzaWJsZVwiKTtcclxuICAgICAgICBxdWVzdGlvbi5rb1ZhbHVlKHF1ZXN0aW9uLm90aGVyU3RyaW5nKTtcclxuICAgICAgICBhc3NlcnQuZXF1YWwocXVlc3Rpb24ua29PdGhlclZpc2libGUoKSwgdHJ1ZSwgXCJPdGhlciB2aXNpYmxlIGlzIHRydWUgYWZ0ZXIgc2VsZWN0aW5nIGl0XCIpO1xyXG4gICAgfSk7XHJcbiAgICBRVW5pdC50ZXN0KFwiQ3JlYXRlIGtvVmFsdWUgYXMgb2JzZXJ2YWJsZSBhcnJheSBmb3IgY2hlY2tib3hcIiwgZnVuY3Rpb24gKGFzc2VydCkge1xyXG4gICAgICAgIHZhciBxdWVzdGlvbiA9IG5ldyBRdWVzdGlvbkNoZWNrYm94KFwicVwiKTtcclxuICAgICAgICBxdWVzdGlvbi5rb1ZhbHVlLnB1c2goXCJ0ZXN0MVwiKTtcclxuICAgICAgICBxdWVzdGlvbi5rb1ZhbHVlLnB1c2goXCJ0ZXN0MlwiKTtcclxuICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHF1ZXN0aW9uLmtvVmFsdWUoKSwgW1widGVzdDFcIiwgXCJ0ZXN0MlwiXSwgXCJrb1ZhbHVlIGlzIG9ic2VydmFibGUgYXJyYXlcIik7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChxdWVzdGlvbi52YWx1ZSwgW1widGVzdDFcIiwgXCJ0ZXN0MlwiXSwgXCJ2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LlwiKTtcclxuICAgIH0pO1xyXG4gICAgUVVuaXQudGVzdChcImtvT3RoZXJWaXNpYmxlIGZvciBtdWx0aSBjaG9pY2UgaXRlbXNcIiwgZnVuY3Rpb24gKGFzc2VydCkge1xyXG4gICAgICAgIHZhciBxdWVzdGlvbiA9IG5ldyBRdWVzdGlvbkNoZWNrYm94KFwicVwiKTtcclxuICAgICAgICBhc3NlcnQuZXF1YWwocXVlc3Rpb24ua29PdGhlclZpc2libGUoKSwgZmFsc2UsIFwiSW5pdGlhbGx5IGlzIG5vdCB2aXNpYmxlXCIpO1xyXG4gICAgICAgIHF1ZXN0aW9uLmtvVmFsdWUucHVzaChcInRlc3QxXCIpO1xyXG4gICAgICAgIHF1ZXN0aW9uLmtvVmFsdWUucHVzaChxdWVzdGlvbi5vdGhlclN0cmluZyk7XHJcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHF1ZXN0aW9uLmtvT3RoZXJWaXNpYmxlKCksIHRydWUsIFwiT3RoZXIgdmlzaWJsZSBpcyB0cnVlIGFmdGVyIHNlbGVjdGluZyBpdFwiKTtcclxuICAgICAgICBxdWVzdGlvbi5rb1ZhbHVlLnBvcCgpO1xyXG4gICAgICAgIGFzc2VydC5lcXVhbChxdWVzdGlvbi5rb090aGVyVmlzaWJsZSgpLCBmYWxzZSwgXCJPdGhlciB2aXNpYmxlIGlzIHRydWUgYWZ0ZXIgc2VsZWN0aW5nIGl0XCIpO1xyXG4gICAgfSk7XHJcbiAgICBRVW5pdC50ZXN0KFwiVXBkYXRlIGtvVmFsdWUgb24gY2hhbmdpbmcgZGF0YSBpbiBTdXJ2ZXkgb3IgUXVlc3Rpb24udmFsdWUgXCIsIGZ1bmN0aW9uIChhc3NlcnQpIHtcclxuICAgICAgICB2YXIgc3VydmV5ID0gbmV3IFN1cnZleSgpO1xyXG4gICAgICAgIHN1cnZleS5zZXRWYWx1ZShcInRleHRRdWVzdGlvblwiLCBcImluaXRpYWxWYWx1ZVwiKTtcclxuICAgICAgICB2YXIgcGFnZSA9IHN1cnZleS5hZGROZXdQYWdlKFwibXkgcGFnZVwiKTtcclxuICAgICAgICB2YXIgcXVlc3Rpb24gPSBwYWdlLmFkZE5ld1F1ZXN0aW9uKFwidGV4dFwiLCBcInRleHRRdWVzdGlvblwiKTtcclxuICAgICAgICBhc3NlcnQuZXF1YWwocXVlc3Rpb24ua29WYWx1ZSgpLCBcImluaXRpYWxWYWx1ZVwiLCBcImdldCBpbml0aWFsIHZhbHVlXCIpO1xyXG4gICAgICAgIHF1ZXN0aW9uLnZhbHVlID0gXCJzZXRGcm9tVmFsdWVcIjtcclxuICAgICAgICBhc3NlcnQuZXF1YWwocXVlc3Rpb24ua29WYWx1ZSgpLCBcInNldEZyb21WYWx1ZVwiLCBcInNldCBmcm9tIHF1ZXN0aW9uIHZhbHVlXCIpO1xyXG4gICAgICAgIHN1cnZleS5zZXRWYWx1ZShcInRleHRRdWVzdGlvblwiLCBcInNldEZyb21TdXJ2ZXlcIik7XHJcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHF1ZXN0aW9uLmtvVmFsdWUoKSwgXCJzZXRGcm9tU3VydmV5XCIsIFwic2V0IGZyb20gc3VydmV5XCIpO1xyXG4gICAgfSk7XHJcbiAgICBRVW5pdC50ZXN0KFwiVXBkYXRlIGtvVmFsdWUgb24gY2hhbmdpbmcgZGF0YSBpbiBTdXJ2ZXkgb3IgUXVlc3Rpb24udmFsdWUgZm9yIE11bHRpcGxlIEFuc3dlciBRdWVzdGlvbiBcIiwgZnVuY3Rpb24gKGFzc2VydCkge1xyXG4gICAgICAgIHZhciBzdXJ2ZXkgPSBuZXcgU3VydmV5KCk7XHJcbiAgICAgICAgc3VydmV5LnNldFZhbHVlKFwiY2hlY2tib3hRdWVzdGlvblwiLCBcImluaXRpYWxWYWx1ZVwiKTtcclxuICAgICAgICB2YXIgcGFnZSA9IHN1cnZleS5hZGROZXdQYWdlKFwibXkgcGFnZVwiKTtcclxuICAgICAgICB2YXIgcXVlc3Rpb24gPSBwYWdlLmFkZE5ld1F1ZXN0aW9uKFwiY2hlY2tib3hcIiwgXCJjaGVja2JveFF1ZXN0aW9uXCIpO1xyXG4gICAgICAgIGFzc2VydC5kZWVwRXF1YWwocXVlc3Rpb24ua29WYWx1ZSgpLCBbXCJpbml0aWFsVmFsdWVcIl0sIFwiZ2V0IGluaXRpYWwgdmFsdWVcIik7XHJcbiAgICAgICAgcXVlc3Rpb24udmFsdWUgPSBcInNldEZyb21WYWx1ZVwiO1xyXG4gICAgICAgIGFzc2VydC5kZWVwRXF1YWwocXVlc3Rpb24ua29WYWx1ZSgpLCBbXCJzZXRGcm9tVmFsdWVcIl0sIFwic2V0IGZyb20gcXVlc3Rpb24gdmFsdWVcIik7XHJcbiAgICAgICAgc3VydmV5LnNldFZhbHVlKFwiY2hlY2tib3hRdWVzdGlvblwiLCBcInNldEZyb21TdXJ2ZXlcIik7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChxdWVzdGlvbi5rb1ZhbHVlKCksIFtcInNldEZyb21TdXJ2ZXlcIl0sIFwic2V0IGZyb20gc3VydmV5XCIpO1xyXG4gICAgfSk7XHJcbiAgICBRVW5pdC50ZXN0KFwiU2V0IG5vdGlmaWNhdGlvbiBvbiBzZXR0aW5nIHN1cnZleSBkYXRhXCIsIGZ1bmN0aW9uIChhc3NlcnQpIHtcclxuICAgICAgICB2YXIgc3VydmV5ID0gbmV3IFN1cnZleSgpO1xyXG4gICAgICAgIHZhciBwYWdlID0gc3VydmV5LmFkZE5ld1BhZ2UoXCJwYWdlMVwiKTtcclxuICAgICAgICB2YXIgcXVlc3Rpb24gPSBwYWdlLmFkZE5ld1F1ZXN0aW9uKFwidGV4dFwiLCBcInExXCIpO1xyXG4gICAgICAgIHF1ZXN0aW9uLmtvVmFsdWUoXCJ2YWx1ZTFcIik7XHJcbiAgICAgICAgc3VydmV5LmRhdGEgPSBbeyBcInExXCI6IFwidmFsdWUyXCIgfV07XHJcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHN1cnZleS5nZXRWYWx1ZShcInExXCIpLCBcInZhbHVlMlwiLCBcInN1cnZleSBkYXRhIGZvciBxMVwiKTtcclxuICAgICAgICBhc3NlcnQuZXF1YWwocXVlc3Rpb24ua29WYWx1ZSgpLCBcInZhbHVlMlwiLCBcImtub2Nrb3V0IHZhbHVlIGlzIHVwZGF0ZWQuXCIpO1xyXG4gICAgfSk7XHJcbiAgICBRVW5pdC50ZXN0KFwia29WaXNpYmxlIHByb3BlcnR5XCIsIGZ1bmN0aW9uIChhc3NlcnQpIHtcclxuICAgICAgICB2YXIgc3VydmV5ID0gbmV3IFN1cnZleSgpO1xyXG4gICAgICAgIHZhciBwYWdlID0gc3VydmV5LmFkZE5ld1BhZ2UoXCJwYWdlMVwiKTtcclxuICAgICAgICB2YXIgcXVlc3Rpb24gPSBwYWdlLmFkZE5ld1F1ZXN0aW9uKFwidGV4dFwiLCBcInExXCIpO1xyXG4gICAgICAgIGFzc2VydC5lcXVhbChxdWVzdGlvbi5rb1Zpc2libGUoKSwgdHJ1ZSwgXCJpdCBpcyB0cnVlIGJ5IGRlZmF1bHRcIik7XHJcbiAgICAgICAgcXVlc3Rpb24udmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIGFzc2VydC5lcXVhbChxdWVzdGlvbi5rb1Zpc2libGUoKSwgZmFsc2UsIFwiaXQgaXMgZmFsc2Ugbm93XCIpO1xyXG4gICAgfSk7XHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiJzb3VyY2VzIn0=