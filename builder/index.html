---
layout: default
title: Builder
mainmenukey: builder
pathprefix: ../
canonicalUrl: /builder/
---
<div>
    <div>
        <input type="button" value="Run" onclick="surveyRun()" />
    </div>
    <div>
        <div style="width:50%;display: inline-block; vertical-align:top;">
            <div id="jsonerror" style="width:100%"></div>
            <div id="editor" style="height:600px;width:100%">{
questions: [
    { type: "multipletext", name: "pricelimit", isRequired: true, title: "What is the... ",
        items: [
            { name: "leastamount", title: "The least amount you have ever paid for a computer",
                validators: [{ type: "numeric", minValue: 10, maxValue: 10000 }]},
            { name: "mostamount", title: "The most amount you have ever paid for a computer",
                validators: [{ type: "numeric", minValue: 10, maxValue: 10000 }]}
        ]
    },
    { type: "comment", name: "firstcomputer", isRequired: true, 
      title: "Please tell us about your first computer", 
      validators: [{type:"text", minLength:20}]
    }
]}</div>
        </div><!--
        --><div style="width:50%;display: inline-block; vertical-align:top">
            <div  style="padding:10px">
                <div id="surveyContainer"></div>
            </div>
        </div>
        
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.min.js" type="text/javascript" charset="utf-8"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/worker-json.js" type="text/javascript" charset="utf-8"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/mode-json.js" type="text/javascript" charset="utf-8"></script> 
<script> 
    editor = ace.edit("editor"); 
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/json"); 
</script> 

<script type="text/javascript">
function surveyRun() {
    var text = editor.getValue();
    var oldOnError = window.onerror;
    window.onerror = function(message, fileURL, lineNumber){
        document.getElementById('jsonerror').innerHTML = message + ". Line number:" + lineNumber;
    }    
    document.getElementById('surveyContainer').innerHTML = ""; 
    document.getElementById('jsonerror').innerHTML = "";
    eval("var jsonObj = " + text);
    window.onerror = oldOnError;
    
    if(jsonObj) {
        var survey = new dxSurvey.Survey(jsonObj);
        if(survey.jsonErrors) {
            var errorText = "";
            for(var i = 0; i < survey.jsonErrors.length; i ++) {
                var error = survey.jsonErrors[i];
                if(i > 0) errorText += "</p>";
                errorText += error.message;
                if(error.description) {
                    errorText += " " + error.description;
                }
            }
            document.getElementById('jsonerror').innerHTML = errorText;
        }
        survey.render("surveyContainer", "../templates/dx.survey.ko.html");
        survey.onComplete.add(function (s) { 
            var result = "\nThe results are:\n" + JSON.stringify(survey.data);
            if (survey.hasComments) {
                result += "\nComments are:\n" + JSON.stringify(survey.comments);
            }
            document.getElementById('surveyContainer').innerHTML = result; 
        });
    }
}
</script>
